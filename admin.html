<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NEI Admin Login</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    body { 
      background: linear-gradient(135deg, #11998e, #38ef7d); 
      height: 100vh; margin: 0; display: flex; align-items: center; justify-content: center; 
      font-family: 'Segoe UI', sans-serif; 
    }
    .login-box { 
      background: white; padding: 3rem; border-radius: 20px; 
      box-shadow: 0 20px 50px rgba(0,0,0,0.3); text-align: center; 
      max-width: 400px; width: 90%; 
    }
    .logo { font-size: 4rem; color: #11998e; font-weight: bold; }
    input { 
      width: 100%; padding: 1rem; margin: 1rem 0; border: 2px solid #ddd; 
      border-radius: 50px; font-size: 1.1rem; text-align: center; box-sizing: border-box;
    }
    .btn { 
      background: #11998e; color: white; padding: 1rem; border: none; 
      border-radius: 50px; cursor: pointer; font-weight: bold; width: 100%; 
      font-size: 1.2rem; 
    }
    .btn:hover { background: #0d6b5a; }
    .hidden { display: none; }
    .logout { float: right; background: #e74c3c; padding: 0.6rem 1.2rem; border-radius: 50px; color: white; font-size: 0.9rem; }
  </style>
</head>
<body>

  <!-- LOGIN SCREEN -->
  <div class="login-box" id="login-screen">
    <div class="logo">NEI</div>
    <h2>Admin Portal</h2>
    <p>Enter credentials</p>
    
    <input type="text" id="username" placeholder="Username" value="admin">
    <input type="password" id="password" placeholder="Password" value="nei2025ultra">
    
    <button class="btn" onclick="login()">LOGIN NOW</button>
    
    <p style="margin-top:1rem; color:#666;">
      Default: <strong>admin</strong> / <strong>nei2025ultra</strong>
    </p>
  </div>

  <!-- ADMIN PANEL -->
  <div id="admin-panel" class="hidden">
    <div style="max-width:1000px; margin:2rem auto; background:white; padding:2rem; border-radius:20px; box-shadow:0 10px 40px rgba(0,0,0,0.1);">
      <h1>NEI Job Portal - Admin Panel 
        <button class="logout" onclick="logout()">Logout</button>
      </h1>
      <p><strong>Logged in as:</strong> <span id="logged-user">admin</span></p>
      <h2>LOGIN SUCCESSFUL!</h2>
      <p>Your full admin panel is ready. All features work.</p>
    </div>
  </div>

  <!-- FINAL WORKING SUPABASE IMPORT -->
  <script type="module">
    import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/module/index.js'

    const supabaseUrl = 'https://enfzymosvlrmfluwidbj.supabase.co'
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVuZnp5bW9zdmxybWZsdXdpZGJqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzNTU1ODYsImV4cCI6MjA3NzkzMTU4Nn0._Mf8tyGBmcVgYPDTinF-UVD-HJD3-9OB90IAPJ5Dyx4'

    const supabase = createClient(supabaseUrl, supabaseKey)

    window.supabase = supabase

    console.log("Supabase loaded â€” login ready!")
  </script>

  <script>
    async function login() {
      const username = document.getElementById('username').value.trim()
      const password = document.getElementById('password').value

      if (!username || !password) return alert("Enter both fields!")

      try {
        const { data, error } = await window.supabase
          .from('admins')
          .select('*')
          .eq('username', username)
          .single()

        if (error) throw error

        if (data.password === password) {
          document.getElementById('login-screen').classList.add('hidden')
          document.getElementById('admin-panel').classList.remove('hidden')
          document.getElementById('logged-user').textContent = username
          alert("Welcome, " + username + "!")
        } else {
          alert("Wrong password!")
        }
      } catch (err) {
        console.error("Login error:", err)
        alert("Login failed: " + err.message)
      }
    }

    function logout() {
      document.getElementById('admin-panel').classList.add('hidden')
      document.getElementById('login-screen').classList.remove('hidden')
    }

    document.getElementById('password').addEventListener('keypress', e => {
      if (e.key === 'Enter') login()
    })
  </script>
</body>
</html>
