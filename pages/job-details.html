<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loading... - NEI Job Portal</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/responsive.css">
</head>
<body>
  <div class="container" style="padding:2rem; min-height:100vh;">
    
    <div id="job-content"></div>
  </div>

  <script>
    const { createClient } = supabase;
    const client = createClient('https://enfzymosvlrmfluwidbj.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVuZnp5bW9zdmxybWZsdXdpZGJqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzNTU1ODYsImV4cCI6MjA3NzkzMTU4Nn0._Mf8tyGBmcVgYPDTinF-UVD-HJD3-9OB90IAPJ5Dyx4');

    const urlParams = new URLSearchParams(window.location.search);
    const jobId = urlParams.get('id');

    async function load() {
      const { data: job } = await client.from('jobs').select('*').eq('id', jobId).single();
      if (!job) { document.getElementById('job-content').innerHTML = '<p>Job not found</p>'; return; }

      document.title = `${job.title} - NEI Job Portal`;

      document.getElementById('job-content').innerHTML = `
        <div style="background:white; padding:2rem; border-radius:15px; box-shadow:var(--box-shadow);">
          <h1 style="color:var(--primary-color);">${job.title}</h1>
          <p><strong>Last Date:</strong> <span style="color:#e74c3c;">${job.lastdate || 'Soon'}</span></p>
          <p><strong>Vacancy:</strong> ${job.vacancy || 'N/A'}</p>
          <p><strong>Post:</strong> ${job.postname || 'Various'}</p>
          <p><strong>Salary:</strong> ${job.salary || 'Check notification'}</p>
          p><strong>Eligibility:</strong> ${job.eligibility || 'Check notification'}</p>
          <h3>Important Links</h3>
          ${job.apply ? `<a href="${job.apply}" target="_blank" style="background:var(--success); color:white; padding:1rem 2rem; border-radius:10px; text-decoration:none; display:inline-block; margin:0.5rem;">Apply Online</a>` : ''}
          ${job.notification ? `<a href="${job.notification}" target="_blank" style="background:var(--warning); color:white; padding:1rem 2rem; border-radius:10px; text-decoration:none; display:inline-block; margin:0.5rem;">Notification</a>` : ''}
          ${job.resultLink ? `<a href="${job.resultLink}" target="_blank" style="background:#9b59b6; color:white; padding:1rem 2rem; border-radius:10px; text-decoration:none; display:inline-block; margin:0.5rem;">Download Result</a>` : ''}
          ${job.admitCardLink ? `<a href="${job.admitCardLink}" target="_blank" style="background:#3498db; color:white; padding:1rem 2rem; border-radius:10px; text-decoration:none; display:inline-block; margin:0.5rem;">Download Admit Card</a>` : ''}
          <br><br>
          <a href="../index.html" style="color:var(--primary-color); text-decoration:underline;">‚Üê Back to Jobs</a>
        </div>
      `;
    }
    load();
  </script>
</body>
</html>
